(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(37)},,,,,function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),i=n.n(c),l=(n(22),n(1)),o=n(2),u=n.n(o),s=n(4),m="CART/SAVE",d=function(e){return Object(s.action)(m,{entry:e})},f=function(e){return Object(s.action)("CART/REMOVE",{id:e})},v=function(e,t){return Object(s.action)("MODAL/TOGGLE",{vis:e,entry:t})},b=(n(29),u.a.with("cart-entry")),h=function(e){var t=e.name,n=e.quantity,a=e.onChangeClick,c=e.onRemove;return r.a.createElement("tr",null,r.a.createElement("td",null,t.length<40?t:"".concat(t.slice(0,40),"...")),r.a.createElement("td",null,n),r.a.createElement("td",null,r.a.createElement("button",{className:b("btn"),onClick:a},r.a.createElement("i",{className:"fas fa-pen"}))),r.a.createElement("td",null,r.a.createElement("button",{className:b("btn"),onClick:c},r.a.createElement("i",{className:"fas fa-trash"}))))},E=function(e){return e.cart.entries.slice(0,20)},y=(n(30),u.a.with("cart")),O=function(){var e=Object(l.c)(E),t=Object(l.b)();return e.length?r.a.createElement("table",{className:y()},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"Quantity"))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement(h,Object.assign({key:e.id},e,{onChangeClick:function(){return t(v(!0,e))},onRemove:function(){return t(f(e.id))}}))})))):r.a.createElement("div",{className:y("empty")},"Empty")},p=n(3),g=(n(31),u.a.with("modal")),j=function(e){var t=e.children,n=e.onClose;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:g("overlay"),onClick:n}),r.a.createElement("div",{className:g()},r.a.createElement("div",{onClick:n,className:g("close-btn")},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("div",{className:g("content")},t)))},N="CHANGE_MODAL/CHANGE",w="CHANGE_MODAL/TOUCH",C=function(e,t,n){return Object(s.action)(N,{field:e,value:t,error:n})},M=function(){return Object(s.action)(w)},q=n(15),k=function(e,t){var n=e.map((function(e){return e(t)})).filter(Boolean)[0];return n?n.message:void 0},A=(n(32),u.a.with("change-modal-input")),L=function(e){var t=e.name,n=e.constraints,c=e.touched,i=e.normalize,o=Object(q.a)(e,["name","constraints","touched","normalize"]),u=Object(l.c)((function(e){return e.changeModal.fields[t]})),s=u.value,m=u.error,d=Object(l.b)();Object(a.useLayoutEffect)((function(){d(C(t,s,k(n,s)))}),[]);return r.a.createElement("div",{className:A()},r.a.createElement("input",Object.assign({className:A("input")},o,{name:t,value:s||"",onChange:function(e){var a=e.target.value,r=(i||function(e){return e})(a);d(C(t,r,k(n,r)))}})),c&&m&&r.a.createElement("div",{className:A("error")},m))},G=function(e){return{id:e.changeModal.currentId,name:e.changeModal.fields.name.value,quantity:e.changeModal.fields.quantity.value}},R=function(e){var t=e.changeModal.fields;return Object.keys(t).every((function(e){return!t[e].error}))},T=function(e){return e.changeModal.touched},D=function(e){var t=e.changeModal.currentId;return new Set(e.cart.entries.filter((function(e){return e.id!==t})).map((function(e){return e.name.toLowerCase().trim()})))},S=(n(33),u.a.with("change-modal")),I=function(){var e,t,n,a=Object(l.c)(G),c=Object(l.c)(T),i=Object(l.c)(R),o=Object(l.c)(D),u=Object(l.b)();return r.a.createElement(j,{onClose:function(){return u(v(!1))}},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),i?(u(d(Object(p.a)({},a,{name:a.name.trim(),quantity:+a.quantity}))),u(v(!1))):u(M())},className:S()},r.a.createElement("fieldset",null,r.a.createElement(L,{name:"name",placeholder:"Name",autoFocus:!0,touched:c,constraints:[function(e){return!e&&{message:" "}},(n=128,function(e){return e.length>n&&{message:"max length is ".concat(n)}}),(t=o,function(e){return!!e&&t.has(e.toLowerCase().trim())&&{message:"must be unique"}})]}),r.a.createElement(L,{name:"quantity",placeholder:"Quantity",touched:c,constraints:[function(e){return!e&&{message:" "}},function(e){return!!e&&isNaN(+e)&&{message:"must be a number"}},(e=0,function(t){return!!t&&+t<=e&&{message:"must be greater than ".concat(e)}})],normalize:H})),r.a.createElement("button",{className:S("save-btn")},"Save")))},H=function(e){return e.replace(/[^\d]/g,"")},x=n(38),z=(n(34),u.a.with("add-button")),B=function(){var e=Object(l.b)();return r.a.createElement("button",{className:z(),onClick:function(){return e(v(!0,{id:Object(x.a)(),name:"",quantity:0}))}},"+")},V=(n(35),u.a.with("root")),W=function(){var e=Object(l.c)((function(e){return e.modal.visible}));return r.a.createElement("div",{className:V()},r.a.createElement("div",{className:V("container")},r.a.createElement("h2",null,"Shopping list"),r.a.createElement("div",{className:V("add-button")},r.a.createElement(B,null)),r.a.createElement(O,null),e&&r.a.createElement(I,null)))},F=n(5),J=n(13),Q=n(14),_={entries:[{id:Object(x.a)(),name:"\u0413\u0440\u0435\u0447\u043a\u0430",quantity:200},{id:Object(x.a)(),name:"\u0422\u0443\u0430\u043b\u0435\u0442\u043d\u0430\u044f \u0431\u0443\u043c\u0430\u0433\u0430",quantity:100}]},P=n(7),U={touched:!1,fields:{name:{value:""},quantity:{value:""}}},$={visible:!1},K=Object(F.combineReducers)({cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:var n=e.entries.findIndex((function(e){return e.id===t.payload.entry.id}));return n>=0?Object(p.a)({},e,{entries:e.entries.map((function(e){return e.id===t.payload.entry.id?t.payload.entry:e}))}):Object(p.a)({},e,{entries:[t.payload.entry].concat(Object(Q.a)(e.entries))});case"CART/REMOVE":return Object(p.a)({},e,{entries:e.entries.filter((function(e){return e.id!==t.payload.id}))});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODAL/TOGGLE":return Object(p.a)({},e,{visible:t.payload.vis});default:return e}},changeModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODAL/TOGGLE":if(t.payload.vis){var n=t.payload.entry;return Object(p.a)({},U,{currentId:null===n||void 0===n?void 0:n.id,fields:{name:{value:(null===n||void 0===n?void 0:n.name)||""},quantity:{value:n&&n.quantity>0?"".concat(n.quantity):""}}})}return e;case w:return Object(p.a)({},e,{touched:!0});case N:return Object(p.a)({},e,{fields:Object(p.a)({},e.fields,Object(P.a)({},t.payload.field,Object(p.a)({},e.fields[t.payload.field],{value:t.payload.value,error:t.payload.error})))});default:return e}}}),X=Object(F.createStore)(K,{},Object(J.composeWithDevTools)()),Y=(n(36),function(){return r.a.createElement(l.a,{store:X},r.a.createElement("div",{className:"App"},r.a.createElement(W,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[17,1,2]]]);
//# sourceMappingURL=main.ee5c96a5.chunk.js.map